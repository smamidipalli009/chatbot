name: Build ML Model

on:
#  push:
#    branches: [ main ]
  workflow_dispatch:

jobs:
  build:
    name: Run Pipeline & Clean Up
    runs-on: self-hosted


    steps:
    - name: Clean Workspace
      run: |
        echo "Cleaning runner workspace..."
        echo "Workspace cleaned"

    - name: Checkout Code
      uses: actions/checkout@v3

    - name: Install Required Packages
      run: |
        python -m venv build_env
        source venv_py313/bin/activate

    - name: Install Required Packages
      run: |
        pip install -r requirements_build.txt --break-system-packages

    - name: Run ML Pipeline
      run: |
        python3 src/run_pipelines.py
